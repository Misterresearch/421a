---
title: "The 421a Tax Abatement The Black Population Loss in NYC"
author: "Blandon Casenave"
date: "March 23, 2018"
output:
  word_document: default
  pdf_document: default
  html_document: default
---

## INTRODUCTION

The principalresearch question for this project, is to determine whether or not the 421a Tax Abatement, designed to stimulate housing development in New York City, became a driver in the decrease of tha city's Black population. Over the years a variety of news outlets, as well as casual observations have all seemed to support the commonly accepted idea that the Black population in NYC has decreased. 

In 2012, the title of an article in one of NYC's local newspaper's, reads "Black population surges in East New York as it falls across the borough and city" [^1]. The article goes on to detail the population losses, primarily in Brooklyn, 2000-2010. Also, very recent data that shows, Brooklyn, New York's overall population has decreased from  2016 to 2017, the first annual drop since 2010 [^2].  

However, a phrase from the above article, captures the central mission of our research study. The article states "Whether gentrification leads directly to displacement is a separate question..." - this is precisely the question we're aiming to answer. While there's no agreement on what defines gentrification, or at least its measurable indicators (housing costs, income, etc), this research study takes another angle. This study operationalizes the concept of gentrification, by a single policy initiative  - NYC's official count of 421a tax abated units. The research question becomes more specific, has New York City's 421a Tax Abatement policy, caused the displacement of Blacks and others in New York City?. This is a very different question that asking whether the symptoms of gentrification, such as higher housing costs or a decrease in manufacturing jobs, have caused population displacement. This research question seeks to quantify the causal relationship between policy and outcomes, if any.

The second policy consideration is to determine whether or not, New York Police Departments "Stop & Frisk" practice, during its peak years, was also a causal factor in displacement vis a vis being enforced in areas with the highest amount of 421 tax abated housing.  

Finally, a supplemental component of our study, was to perform the same quantitative analysis used to measure the impacts on Blacks, also on the Puerto Rican subset of the Latino community. 

## ABSTRACT

The American Community Survey (ACS) data so far has actually shown that the compound annual growth rate (CAGR) is positive for the overall population of NYC (Overall), as well as the African-American/Black (Black), White & Latino racial/ethnic groupings in New York City from 2005-2016 [^3]. However, of the five separate racial/ethnic groupings in our analysis - Puerto Rican was the only one to see a negative CAGR from 2005-2016. 

Tallies for 421a abated units, as well as location, were provided by the New York City Department of Finance[^4]. Data is available from 2013-2018, severely limiting the scope of our analysis. However, it's important to note that data in each year is cumulative from all previous years, minus units whose 421a tax abatement had expired.  
Finally, NYPD Stop & Frisk data spans 2003-2016 [^5]. It's important to note that policy changes in 2012, essentially ended this practice in New York City. However,the question still remains, was Stop & Frisk effective tool in population displacement during its peak year 2006-2011, by being enforced in the areas with newly built some tax abated housing? 

Although the population in New York City, is more white, the Black and Latino populations have also grown. It's the Puerto Rican community, that best demonstrates the link between the 421a Tax Abatement policy and displacement given its population losses, and portion of 421a units in areas dominated by this ethnic group.   

```{r, echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(tidyr)
library(stats)
library(prophet)
library(pROC)
library(ggplot2)
library(forecast)
library(tseries)
library(segmented)
library(data.table)
library(RCurl)
library(XML)
library(rvest)
library(scales)
library(formattable)
```

## POPULATION TRENDS BY RACE & ETHNICITY 

The chart below provides a visualization of NYC's overall population growth by race, spanning 2005-2016, as estimated by ACS annually. Although the CAGR for Blacks is .01, and for whites it's .01, visually it appears that instead of Blacks being negatively impacted by Whites - the opposite is true. 

In fact, our Pearson's R measurement yields a .97 between the two groups, indicating an almost perfectly positive linear relationship.

However, the Puerto Rican trend is negatively correlated with the overall population  (-.64) and all Latinos (-.91). 

## - NYC POPULATION TREND CHART

```{r, echo=FALSE, warning=FALSE, message=FALSE}
nycblk <- "https://raw.githubusercontent.com/Misterresearch/421a/master/NYC_Black_Population.csv"

nycblkdf <- read.csv(nycblk, header = TRUE, sep = ",")

nycpr <- "https://raw.githubusercontent.com/Misterresearch/421a/master/NYC_PR_Population.csv"
nycprdf <- read.csv(nycpr, header = TRUE, sep = ",")
nycprdf$Latino.Population <- ((1/nycprdf$Puerto.Rican.Latino.Percentage)*nycprdf$Puerto.Rican.Population)

nycprdf$Other.Latino.Population <- (nycprdf$Latino.Population - nycprdf$Puerto.Rican.Population)

ggplot() + ggtitle("Population Trend By Race & Ethnicity")+ scale_x_continuous(breaks = nycblkdf$Year) + scale_y_continuous(name = "Population Count") +geom_line(data = nycblkdf, aes(x=Year, y=Overall.Population, group=1, colour="navy"),  size = 1) + geom_line(data = nycblkdf, aes(x=Year, y=Black.Population, group=1, colour="black"),  size = 1) + geom_line(data = nycblkdf, aes(x=Year, y=White.Population, group=1, colour="white"),  size = 1)  + geom_line(data = nycprdf, aes(x=Year, y=Puerto.Rican.Population, group=1, colour="tan"),  size = 1) + geom_line(data = nycprdf, aes(x=Year, y=Latino.Population, group=1, colour="brown"),  size = 1) + scale_color_discrete(name = "Race/Ethnicity", labels = c("Black","Latino","Overall", "Puerto Rican", "White"))

```

### COMPOUND ANNUAL GROWTH RATE - OVERALL & RACE\ETHNICITY

```{r, echo=FALSE, message=FALSE, warning=FALSE}

NYCAllPopCAGR <-((nycblkdf$Overall.Population[12] / nycblkdf$Overall.Population[1]) ^ (1 / NROW(nycblkdf))) - 1

NYCWhiteCAGR <- ((nycblkdf$White.Population[12] / nycblkdf$White.Population[1]) ^ (1 / NROW(nycblkdf))) - 1

NYCBlkCAGR <-((nycblkdf$Black.Population[12] / nycblkdf$Black.Population[1]) ^ (1 / NROW(nycblkdf))) - 1

NYCPrCAGR <- ((nycprdf$Puerto.Rican.Population[12] / nycprdf$Puerto.Rican.Population[1]) ^ (1 / NROW(nycblkdf))) - 1

NYCOtherLatinoCAGR <- ((nycprdf$Other.Latino.Population[12] / nycprdf$Other.Latino.Population[1]) ^ (1 / NROW(nycblkdf))) - 1

NYCPopCAGRdf <- data.frame(round(NYCAllPopCAGR, 2), round(NYCWhiteCAGR, 2), round(NYCBlkCAGR, 2), round(NYCOtherLatinoCAGR,2), round(NYCPrCAGR,2))
colnames(NYCPopCAGRdf) <- c("Overall", "White", "Black", "Other Latino", "Puerto Rican")

formattable(NYCPopCAGRdf)
```

### CORRELATION MATRIX
```{r, echo=FALSE, message=FALSE, warning=FALSE}

races <- data.frame(nycblkdf$Overall.Population, nycblkdf$White.Population, nycblkdf$Black.Population, nycprdf$Puerto.Rican.Population, nycprdf$Latino.Population)
mymatrix <- cor(races)
round(mymatrix, 2)

```


## STATISICAL ANALYSIS -  NYC POPULATION TREND & RACE/ETHNICITY REGRESSION

Given the descriptive statistics and correlation analyses above, the next step is to determine whether or not we can have statistical confidence in the directional measures that have been computed thus far.

Although step-wise regression modeling is useful, given the small number of variables and observations, manually variable selection is also appropriate for this use case. 

Given that our data is numeric and continuous, a linear regression model is the right choice to start investigating relationships between variables. 

*See the Appendix A for summary and data distributions*

The initial regression (race_regression) has the overall NYC population trend (Overall.Population) as the dependent variable, while the trends for Black, White, Latino & Puerto Rican are independent variables. This model, risks multi-collinearity because the Puerto Rican trend is a subset of the Latino trend. This model only has two variables that are statistically significant at a 90% confidence interval (CI) - Black (p = .08) and Latino (p = .05). Each of these groups have a positive coefficient with overall population growth - consistent with the results in the preliminary correlation matrix. It's also worth noting, that the White trend has a negative correlation with the overall population trend, although not statistically significant at a 90% CI, with a p-value = .11. The overall R-squared for this model is .87. 

**It's important to note that the signs of our coefficients are not related to the growth rate, but rather the relationship between each independent variable and the specified dependent variable**

In race_regressionA, the Puerto Rican trend variable is removed, while the overall population trend variable remains as our dependent variable - the R-squared is .86. All explanatory variables are statistically significant at 90% CI or higher - Black (p = .03), White (p = .06) & Latino (p = .01). Again, Black & Latino have a positive slope coefficient. The White trend has a negative slope coefficient, and in this model it's statistically significant at a 90% CI. 

Essentially the white population growth rate trends differently from the overall population growth on NYC, as well as some other groups. 

Given that our research question places NYC's Black population as the subject, and alternatively Puerto Ricans, the last two regression models have these groups as dependent variables. 

The model, race_regressionD, has Black as the dependent variable - with Overall, White & Puerto Rican as the independent variables. At a 90% CI or higher, all of the other independent variables have positive slope coefficient - Overall (p = .04), White (p = .00) and Puerto Rican (p = .06).

In model race_regression E, with Puerto Rican as the dependent variable, Black is the only variable with a positive slope coefficient that is statistically significant at 90% CI (p = .06). The other two variables, Overall & White have a negative slope coefficient and each of them is statistically significant at 90% CI or higher Overall (p = .02), and White (p = .06).

```{r, echo=FALSE, warning=FALSE, message=FALSE}

race_regression <- lm(nycblkdf$Overall.Population ~ nycblkdf$Black.Population + nycblkdf$White.Population + nycprdf$Puerto.Rican.Population + nycprdf$Latino.Population)
summary(race_regression)

race_regressionA <- lm(nycblkdf$Overall.Population ~ nycblkdf$Black.Population + nycblkdf$White.Population + nycprdf$Latino.Population)
summary(race_regressionA)

race_regressionB <- lm(nycblkdf$Overall.Population ~ nycblkdf$Black.Population + nycblkdf$White.Population + nycprdf$Puerto.Rican.Population)
summary(race_regressionB)

race_regressionC <- lm(nycblkdf$Overall.Population ~ nycprdf$Puerto.Rican.Population)
summary(race_regressionC)

race_regressionD <- lm(nycblkdf$Black.Population ~ nycblkdf$Overall.Population + nycblkdf$White.Population + nycprdf$Puerto.Rican.Population)
summary(race_regressionD)

race_regressionE <- lm(nycprdf$Puerto.Rican.Population ~ nycblkdf$Black.Population + nycblkdf$Overall.Population + nycblkdf$White.Population)
summary(race_regressionE)

```

### POPULATION BY RACE TREND SUMMARY

Based on our descriptive data, visualization and multiple regression analysis we're able to determine that there a statistically significant negative and positive relationships between the growth rates and trends of several racial/ethnic groups in New York City. 

It seems that the White population growth trend is only positive correlated with the Black growth trend, but has an inverse relationship with the overall population and Puerto Ricans. It's possible that gentrification by whites adversely impacted historically Puerto Rican neighborhoods, while having no net impact on Blacks. It's also interesting that although Blacks and Whites have near perfect linear correlation, positive CAGR and positive regression slope coefficients with each other - that their relationship to the Puerto Rican growth trend is opposite that of each other (see race_regressonD & race_regressionE). 

## FISCAL YEAR 2017-18 421a TAX ABATEMENT DESRCIPTIVE STATS

The 421a tax abated unit counts, are "as of" or cumulative for each year that it is provided. The analysis and visualization provided below, are all tax abated units in NYC as of fiscal year 2017-18. 

Of the 67,007 tax abated units that exist in NYC as of fiscal year 2017-18, 47% or 31,776 are Brooklyn. Queens follows with 25% or 16,645. Further when Williamsburg North, South, East and Central are combined - it represents 7,916 tax abated units - the largest in the entire city, followed by Flushing Queens at 4,186. 

```{r setup, include=FALSE, echo=FALSE, warning=FALSE, message=FALSE}

bronx<-"https://raw.githubusercontent.com/Misterresearch/421a/master/421a_1718_bronx.csv"

brooklyn <-"https://raw.githubusercontent.com/Misterresearch/421a/master/421a_1718_brooklyn.csv"

queens<-"https://raw.githubusercontent.com/Misterresearch/421a/master/421a_1718_queens.csv"

manhattan<-"https://raw.githubusercontent.com/Misterresearch/421a/master/421a_1718_manhattan.csv"

si <-"https://raw.githubusercontent.com/Misterresearch/421a/master/421a_1718_statenisland.csv"
```


```{r, echo=FALSE, warning=FALSE, message=FALSE}

manhattantable <- read.csv(manhattan, header = FALSE, sep = ",")
manhattantable <-manhattantable[-c(1:5),]
colnames(manhattantable)<- c("Borough", "Neighborhood", "Building Class", "Tax Class", "Block", "Lot", "Present Building Class", "Address", "Zip Code", "Residential Units", "Commercial Units", "Total Units", "Land Square Feet", "Gross Square Feet", "Year Built")

bronxtable <- read.csv(bronx, header = FALSE, sep = ",")
bronxtable <-bronxtable[-c(1:5),]
colnames(bronxtable)<- c("Borough", "Neighborhood", "Building Class", "Tax Class", "Block", "Lot", "Present Building Class", "Address", "Zip Code", "Residential Units", "Commercial Units", "Total Units", "Land Square Feet", "Gross Square Feet", "Year Built")

brooklyntable <- read.csv(brooklyn, header = FALSE, sep = ",")
brooklyntable <-brooklyntable[-c(1:5),]
colnames(brooklyntable)<- c("Borough", "Neighborhood", "Building Class", "Tax Class", "Block", "Lot", "Present Building Class", "Address", "Zip Code", "Residential Units", "Commercial Units", "Total Units", "Land Square Feet", "Gross Square Feet", "Year Built")
queenstable <- read.csv(queens, header = FALSE, sep = ",")
queenstable <-queenstable[-c(1:5),]
colnames(queenstable)<- c("Borough", "Neighborhood", "Building Class", "Tax Class", "Block", "Lot", "Present Building Class", "Address", "Zip Code", "Residential Units", "Commercial Units", "Total Units", "Land Square Feet", "Gross Square Feet", "Year Built")
sitable <- read.csv(si, header = FALSE, sep = ",")
sitable <-sitable[-c(1:5),]
colnames(sitable)<- c("Borough", "Neighborhood", "Building Class", "Tax Class", "Block", "Lot", "Present Building Class", "Address", "Zip Code", "Residential Units", "Commercial Units", "Total Units", "Land Square Feet", "Gross Square Feet", "Year Built")

allnyc <- rbind(manhattantable,bronxtable,brooklyntable,queenstable, sitable)

#write.csv(allnyc, "/Users/DigitalMarketer1977/Desktop/421a/allnyc.csv")
```

```{r, echo=FALSE, warning=FALSE, message=FALSE}
byboro <- allnyc %>%
  na.omit() %>%
  group_by(Borough) %>%
  summarise(allcounts = NROW(Address)) %>%
  arrange(desc(allcounts))
  
byneighb <- allnyc %>%
  na.omit() %>%
  group_by(Neighborhood) %>%
  summarise(allcounts = NROW(Address)) %>%
  arrange(desc(allcounts)) 

ggplot(data = byboro,aes(x = reorder(Borough,desc(allcounts)), y = allcounts)) + geom_histogram(fill="blue", stat = "identity") + scale_x_discrete(labels = c("Brooklyn", "Queens", "Manhattan", "Bronx", "Staten Island"), name = "Borough")+ scale_y_continuous(name = "# of Units") + ggtitle("FY 2017/18 421a Units By Borough") + theme(plot.title = element_text(family = "Trebuchet MS", color="#666666", face="bold", size=14, hjust=0)) + geom_text(aes(label = comma(round(allcounts)), sep=","), position = position_dodge(0.9), size=3, color="black", vjust=-0.25)

ggplot(data = byneighb[c(1:20),], aes(x=reorder(Neighborhood, desc(allcounts)), y = allcounts)) + geom_histogram(fill="grey", stat = "identity", color="blue") + scale_x_discrete(name ="Neighborhood") + scale_y_continuous(name = "# of Units") + ggtitle("FY 2017/18 421a Units Top 20 Neighborhood") + theme(plot.title = element_text(family = "Trebuchet MS", color="#666666", face="bold", size=14, hjust=0)) + geom_text(aes(label = comma(round(allcounts)), sep=","), position = position_dodge(0.9), size=3, vjust=-0.25) + theme(axis.text.x = element_text(angle = 90, hjust = 1, size = 6))
```

### 421a SHINY APP VISUALIZATION & HEATMAP FOUND HERE:

[NYC 421a Tax Abatement Shiny App](https://bk77.shinyapps.io/421a/)


## STOP & FRISK HISTORICAL TREND

The historical trend for Stop & Frisk data in NYC below, reflects the termination of the policy in 2012 by the NYPD. However, the question remains - did the policy change alter NYC's demographics? 

Presently, there isn't enough data to answer this question. However, with visualization techniques and descriptive measures, some insights into what has occurred is possible. Further, from this analysis, insight into future research questions can be gained.  

```{r, echo=FALSE, warning=FALSE, message=FALSE}
stopstrend <- "https://raw.githubusercontent.com/Misterresearch/421a/master/Stop_Frisk_Annual_NYC.csv"
stopstrenddf <- read.csv(stopstrend, header = TRUE, sep = ",")

ggplot(data=stopstrenddf, aes(x=Year, y=Total.Stops, group=1)) + scale_x_continuous(breaks = stopstrenddf$Year) +
  geom_line(colour="red", size = 1.25) +  geom_text(aes(label = comma(round(Total.Stops)), sep=","), position = position_dodge(0.9), size=3, vjust=-0.25) + theme(axis.text.x = element_text(angle = 60, hjust = 1))

```


## 2011 STOP & FRISK BY BOROUGH

Similar to the dispersion of 421a tax abated units, Brooklyn (228K, 33%) had the most recorded incidents of stops under "Stop & Frisk", in its peak year of 2011, followed by Queens (153K,22%), Manhattan (141K, 21%), Bronx (136K,20%) and finally Staten Island (28K, 4%). 

```{r, echo=FALSE, warning=FALSE, message=FALSE}

# adjust local path
stops <- "~/Documents/DATA ANALYTICS SRPING 2018/DATA698/2011.csv"
stopsdf <- read.csv(stops, header = TRUE, sep = ",")
stopsdfA <- data.frame(stopsdf$city, stopsdf$year)
colnames(stopsdfA) <- c("city", "year")

```


```{r, echo=FALSE, message=FALSE, warning=FALSE}

stopsbyboro <- stopsdfA %>%
  na.omit() %>%
  group_by(city) %>%
  summarise(mycounts = NROW(year)) %>%
  arrange(desc(mycounts))


ggplot(data = stopsbyboro[c(1:5),],aes(x = reorder(city,desc(mycounts)), y = mycounts)) + geom_histogram(fill="blue", stat = "identity") + scale_x_discrete(labels = c("Brooklyn", "Queens", "Manhattan", "Bronx", "Staten Island"), name = "Borough")+ scale_y_continuous(name = "# of Stops") + ggtitle("2011 Stop & Frisk Incidents by Borough") + theme(plot.title = element_text(family = "Trebuchet MS", color="#666666", face="bold", size=14, hjust=0)) + geom_text(aes(label = comma(round(mycounts)), sep=","), position = position_dodge(0.9), size=3, color="black", vjust=-0.25)
```

## 2011 STOP & FRISK BY RACE, GENDER & AGE

Black were 51% of all stops under Stop & Frisk in 2011, followed by Hispanics (Latino), at 33%, and 92% of all stops were male. 

For males the average age was 29.3, for females it was 30.1

```{r, echo=FALSE, message=FALSE, warning=FALSE}
stopsdfrace <- data.frame(stopsdf$race, stopsdf$year)
colnames(stopsdfrace) <- c("race", "year")
stopsdfrace$race <- as.character(stopsdfrace$race)

stopsdfrace$race[stopsdfrace$race=="A"] <- "Asian"
stopsdfrace$race[stopsdfrace$race=="B"] <- "Black"
stopsdfrace$race[stopsdfrace$race=="I"] <- "Native"
stopsdfrace$race[stopsdfrace$race=="P"] <- "Blk Hispanic"
stopsdfrace$race[stopsdfrace$race=="Q"] <- "White Hispanic"
stopsdfrace$race[stopsdfrace$race=="W"] <- "White"
stopsdfrace$race[stopsdfrace$race=="U"] <- "Unknown"
stopsdfrace$race[stopsdfrace$race=="Z"] <- "Other"

stopsdfB<- stopsdfrace %>%
  na.omit() %>%
  group_by(race) %>%
  summarise(mycounts = NROW(year)) %>%
  arrange(desc(mycounts))


ggplot(data = stopsdfB,aes(x = reorder(race,desc(mycounts)), y = mycounts)) + geom_histogram(fill="grey", stat = "identity") + scale_x_discrete(name = "Race")+ scale_y_continuous(name = "# of Stops") + ggtitle("2011 Stop & Frisk Incidents by Race") + theme(plot.title = element_text(family = "Trebuchet MS", color="#666666", face="bold", size=14, hjust=0)) + geom_text(aes(label = comma(round(mycounts)), sep=","), position = position_dodge(0.9), size=3, color="black", vjust=-0.25) + theme(axis.text.x = element_text(angle = 60, hjust = 1))
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
stopsdfsex <- data.frame(stopsdf$sex, stopsdf$year)
colnames(stopsdfsex) <- c("sex", "year")
stopsdfsex$sex <- as.character(stopsdfsex$sex)

stopsdfsex$sex[stopsdfsex$sex=="M"] <- "Male"
stopsdfsex$sex[stopsdfsex$sex=="F"] <- "Female"
stopsdfsex$sex[stopsdfsex$sex=="Z"] <- "Unknown"


stopsdfC<- stopsdfsex %>%
  na.omit() %>%
  group_by(sex) %>%
  summarise(mycounts = NROW(year)) %>%
  arrange(desc(mycounts))


ggplot(data = stopsdfC,aes(x = reorder(sex,desc(mycounts)), y = mycounts)) + geom_histogram(fill="green", stat = "identity") + scale_x_discrete(name = "Sex")+ scale_y_continuous(name = "# of Stops") + ggtitle("2011 Stop & Frisk Incidents by Sex") + theme(plot.title = element_text(family = "Trebuchet MS", color="#666666", face="bold", size=14, hjust=0)) + geom_text(aes(label = comma(round(mycounts)), sep=","), position = position_dodge(0.9), size=3, color="black", vjust=-0.25) 
```

## 2011 STOP & FRISK BY MEDIAN AGE & GENDER

```{r, echo=FALSE, message=FALSE, warning=FALSE}

stopsdfsexage <- data.frame(stopsdf$sex, stopsdf$age)
colnames(stopsdfsexage) <- c("sex", "age")

stopsdfsexage$sex <- as.character(stopsdfsexage$sex)

stopsdfsexage$sex[stopsdfsexage$sex=="M"] <- "Male"
stopsdfsexage$sex[stopsdfsexage$sex=="F"] <- "Female"
stopsdfsexage$sex[stopsdfsexage$sex=="Z"] <- "Unknown"

stopsdfD<- stopsdfsexage%>%
  na.omit() %>%
  group_by(sex) %>%
  summarise(meanage = mean(age))

ggplot(data = stopsdfD,aes(x = sex, y = meanage)) + geom_histogram(fill="orange", stat = "identity") + scale_x_discrete(name = "Sex")+ scale_y_continuous(name = "# of Stops") + ggtitle("2011 Stop & Frisk Incidents by Sex & Age") + theme(plot.title = element_text(family = "Trebuchet MS", color="#666666", face="bold", size=14, hjust=0)) + geom_text(aes(label=round(meanage,1)),position = position_dodge(0.9), size=3, color="black", vjust=-0.25) 
```

## CORRELATION between 2017/18 421a Tax Abatements & 2011 Stop & Frisk

With only seven years of comparable data between the NYPD Stop & Frisk totals, and ACS Population data, risk is introduced in analyzing and drawing insights from this data set. 

What we're able to see is that there is a near perfect correlation (.98) between total incidents of stops, under Stop & Frisk and the Latino growth rate between 2005-2011. The correlation in this instance can be coincidence given the separate growth rates of each of these phenomena. 

The only group trend to have a negative correlation with Stop & Frisk, is Puerto Rican (-.55). However, if the growth rate of Puerto Ricans was in decline during this period due to other factors, while Stop & Frisk was increasing then the correlation here would simply be chance. 

Currently, based on the limited data that exists, there's no clear connection that can be drawn between Stop & Frisk and the growth trends in NYC overall, or among any specific racial/ethnic group. 

```{r, echo=FALSE, message=FALSE, warning=FALSE}

stopsL<-cor(stopstrenddf$Total.Stops[3:9], nycprdf$Latino.Population[1:7])
stopsO<-cor(stopstrenddf$Total.Stops[3:9], nycblkdf$Overall.Population[1:7])
stopsP<-cor(stopstrenddf$Total.Stops[3:9], nycprdf$Puerto.Rican.Population[1:7])
stopsW<-cor(stopstrenddf$Total.Stops[3:9], nycblkdf$White.Population[1:7])
stopsB<-cor(stopstrenddf$Total.Stops[3:9], nycblkdf$Black.Population[1:7])

summary_stopscor <- data.frame(stopsO,stopsL,stopsP,stopsW,stopsB)
colnames(summary_stopscor) <- c("Stops & Overall Pop Trend", "Stops & Latino Pop Trend", "Stops & Puerto Rican Pop Trend", "Stops & White Pop Trend", "Stops & Black Pop Trend")
rownames(summary_stopscor) <- c("Correlation Statistic")
summary_stopscor["Correlation Statistic",]<- round(summary_stopscor["Correlation Statistic",], 2)
formattable(summary_stopscor)

```

### STOP & FRISK SHINY APP VISUALIZATION & HEATMAP FOUND HERE:

[NYPD Stop and Frisk Map](https://bk77.shinyapps.io/stop_frisk/)

## CONCLUSION

Without more historical data for NYC 421a tax abatement program, very little can be done to link it to growth rates of different racial/ethnic groups within NYC or to the NYPD's policy of Stop & Frisk from 2003-2011. However, what we have been to do is learn a few key insights concerning our research question. First, it's futile to try and determine the causes of NYC's Black population decrease, because based on the ACS data - it's actually increasing. Perhaps a new question should be asked, one that isolates African-Americans, as opposed to including immigrant groups which may masks net losses among African-Americans. So far, we have learned that the White growth rate is negatively related to the overall and Latino growth rate of NYC. 

Finally, we discovered that the Puerto Rican subset within the Latino group is actually experiencing negative growth, which seems to be conversely related to the growth of whites and other Latinos. It could be that whites are directly impacting the population decrease among Puerto Ricans, while other Latino groups are increasign inhabiting non-gentrified areas of NYC. 

We've established where tax abated units have been most constructed, and we've established negative population growth for Puerto Ricans. However, without historical data for the 421a tax abatement we cannot establish a statistically significant link between the two. 

## APPENDIX A - DATA DISTRIBUTION

```{r, echo=FALSE, message=FALSE, warning=FALSE}

summary(nycblkdf$Overall.Population)
summary(nycblkdf$White.Population)
summary(nycblkdf$Black.Population)
summary(nycprdf$Latino.Population)
summary(nycprdf$Puerto.Rican.Population)


par(mfrow=c(3,2))

hist(nycblkdf$Overall.Population, col = "blue")
hist(nycblkdf$White, col = "red")
hist(nycblkdf$Black.Population, col = "black")
hist(nycprdf$Latino.Population, col = "brown")
hist(nycprdf$Puerto.Rican.Population, col = "tan")

par(mfrow=c(3,2))
qqnorm(nycblkdf$Overall.Population, col = "blue")
qqnorm(nycblkdf$White, col = "red")
qqnorm(nycblkdf$Black.Population, col = "black")
qqnorm(nycprdf$Latino.Population, col = "brown")
qqnorm(nycprdf$Puerto.Rican.Population, col = "tan")
```

[^1]: [Black population surges in East New York as it falls across the borough and city](http://www.nydailynews.com/new-york/brooklyn/black-population-surges-east-new-york-falls-borough-city-article-1.1076068)

[^2]: [Brooklyn Is Booming. So Why Is It Shrinking](https://www.citylab.com/equity/2018/03/brooklyn-is-booming-so-why-is-it-shrinking/556280/)

[^3]: [American Community Survey](https://www1.nyc.gov/site/planning/data-maps/nyc-population/american-community-survey.page)

[^4]: [NYC 421a Housing Table](http://www1.nyc.gov/site/finance/benefits/benefits-421a.page)


[^5]: [NYPD Stop & Frisk](https://www1.nyc.gov/site/nypd/stats/reports-analysis/stopfrisk.page)

[Source Code](https://github.com/Misterresearch/421a/blob/master/nyc_421a.Rmd)

[Googleway](https://cran.r-project.org/web/packages/googleway/vignettes/googleway-vignette.html)

